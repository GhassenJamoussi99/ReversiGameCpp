# Static code analysis

The following document presents the results of static analysis conducted on our source code using the CppCheck and PVS-Studio tools.

<!-- markdownlint-disable MD025 -->
# CppCheck Tool
<!-- markdownlint-enable MD025 -->

## Overview

This document provides an overview of the problems identified by the Cppcheck tool on the Reversi project. The analysis was done using Version 2.7 of the Cppcheck tool. The problems have been classified and evaluated in terms of frequency, similarity, and severity. Logs, XML and HTML report are included for documentation purposes at the end of the protocol.

## Definition

CppCheck is a static analysis tool for C and C++ code. It is designed to detect various issues that can lead to errors, memory leaks, and other security risks. CppCheck can be used to identify potential problems in code that could lead to unexpected behavior, errors, or crashes.

## Problems Identified

### Frequency

Frequency is the number of times a problem occurs in a given protocol.

### Similarity

Similarity is the degree to which two or more problems are related.

### Severity

Severity is the degree to which a problem can affect the performance or integrity of a protocol. According to CppCheck, severities are categorized into 7 types.
<!-- markdownlint-disable MD033 -->
|Severity Type|Description|
|---|---|
|error|Programming error. <br/><br/> This indicates severe error like memory leak etc. The error is certain.|
|warning|Warning. <br/><br/> Used for dangerous coding style that can cause severe runtime errors. For example: forgetting to initialize a member variable in a constructor.|
|style|Style warning. <br/><br/> Used for general code cleanup recommendations. Fixing these will not fix any bugs but will make the code easier to maintain. For example: redundant code, unreachable code, etc.|
|performance|Performance warning. <br/><br/> Not an error as is but suboptimal code and fixing it probably leads to faster performance of the compiled code.|
|portability| Portability warning. <br/><br/> This warning indicates the code is not properly portable for different platforms and bitnesses (32/64 bit). If the code is meant to compile in different platforms and bitnesses these warnings should be fixed.|
|information| Checking information. <br/><br/> Information message about the checking (process) itself. These messages inform about header files not found etc issues that are not errors in the code but something user needs to know.|
|debug|Debug message. <br/><br/> Debug-mode message useful for the developers.
<!-- markdownlint-enable MD033 -->
### Summary of the identified problems with CppCheck tool

The following table shows the frequency, similarity and severity of the problems identified with CppCheck:

ID  |Problem Type|Frequency|Similarity|Severity|
|---|---|---|---|---|
|A|uninitMemberVar|5|  | warning|
|B|noCopyConstructor|3 | C | warning|
|C|noOperatorEq|3 | B | warning|
|D|missingOverride|2 | | style|
|E|unusedFunction|2 | | style|
|F|noExplicitConstructor|1 | | style|
|G|variableScope|1 | | style|

Top 10 files for warning severity, total findings: 11

    4  src/reversigame.cpp
    3  src/reversiboard.cpp
    2  src/menu.cpp
    2  include/player.h
Top 10 files for style severity, total findings: 6

    1  src/user.cpp
    1  src/reversigame.cpp
    1  src/computer.cpp
    1  include/user.h
    1  include/computer.h
    1  external/log.h

Which makes a total of 17 problems.

## Conclusion - CppCheck

The analysis performed using CppCheck revealed a high frequency of `uninitMemberVar`, medium frequencies of `noCopyConstructor` and `noOperatorEQ`, which were all considered as **warnings** and low frequencies of `missingOverride`, `unusedFunction`, `noExplicitConstructor` and `variableScope`, which were all considered as **style** in terms of severity type.

In conclusion, cppcheck was able to successfully identify a number of problems. These problems were classified and evaluated in terms of frequency, similarity, and severity.

## Documentation - CppCheck

Logs, XML and HTML report of the cppcheck analysis are included below for reference.

### Log file - CppCheck

Log file is generated by running the written shellscript `ReversiGame/run_cppcheck.sh`.

[Log File](ReversiGame/tests/static/cppcheck/report_reversi.log)

### XML file - CppCheck

XML file is generated by running the written shellscript `ReversiGame/run_cppcheck.sh`.

[XML file](ReversiGame/tests/static/cppcheck/report_reversi.xml)

### HTML report - CppCheck

Download or clone the project and open `ReversiGame/tests/static/cppcheck/cppcheck_reports/index.` to see the results.

[HTML report](ReversiGame/tests/static/cppcheck/cppcheck_reports/index.html)

<!-- Similarity TODO not clear enough. -->
<!-- Fix code based on static analysis. -->
<!-- markdownlint-disable MD025 -->
# Second Tool Static analysis Bonus Task
<!-- markdownlint-enable MD025 -->

## PVS-Studio

We expand the static analysis PVS-Studio with the Visual Studio Code extension for "C/C++ ".

As a prerequisite it is important to have these tools installed on your machine (in this case: PVS-Studio and cppcheck).

We check our code with this tool and got these messages.

The new tool PVS-Studio found the similiar unused entity issues with the variables.

|ID|Problem Type|Frequency|Similarity|Severity|Found in CppCheck|Found in PVS-Studio|
|---|---|---|---|---|---|---|
|A|uninitMemberVar|4|  | warning|x|x|
|B|noCopyConstructor|3 | C | warning|x||
|C|noOperatorEq|3 | B | warning|x||
|D|missingOverride|2 | | style|x||
|E|unusedFunction|2 | | style|x|x|
|F|Expression 'doubleCheck == true'|5 | | warning||x|
|G|noExplicitConstructor|1 | | style|x||
|H|variableScope|1 | | style|x||

## Conclusion - PVS

As that this tool was complicated to use specialy on VsCode and also a licence was needed, it wasn't possible to get all the fonctions of PVS-Studio in VsCode however it ts available on Visual Studio.

That's why we could not get all the errors comparing with what cppCheck did.

## Documentation - PVS

HTML report for static analysis using PVS is included below for reference.

### HTML report - PVS

Download or clone the project and open `ReversiGame/tests/static/PVS/PVS-Studio.html` to see the results.

[HTML report](ReversiGame/tests/static/PVS/PVS-Studio.html)
